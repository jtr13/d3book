<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Interactivity  | D3 for R Users</title>
  <meta name="description" content="7 Interactivity  | D3 for R Users" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Interactivity  | D3 for R Users" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Interactivity  | D3 for R Users" />
  
  
  

<meta name="author" content="Joyce Robbins" />


<meta name="date" content="2023-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scales-and-axes.html"/>
<link rel="next" href="transitions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">D3 for R Users</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to D3</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#workflow"><i class="fa fa-check"></i><b>0.1</b> Workflow</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#javascript-console"><i class="fa fa-check"></i><b>0.1.1</b> JavaScript Console</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#this-book-in-the-console"><i class="fa fa-check"></i><b>0.1.2</b> This book in the Console</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#text-editor"><i class="fa fa-check"></i><b>0.1.3</b> Text editor</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="jump.html"><a href="jump.html"><i class="fa fa-check"></i><b>1</b> Jump in the deep end <i class="fas fa-swimmer"></i></a>
<ul>
<li class="chapter" data-level="1.1" data-path="jump.html"><a href="jump.html#get-ready"><i class="fa fa-check"></i><b>1.1</b> Get ready <i class="fas fa-forward"></i></a></li>
<li class="chapter" data-level="1.2" data-path="jump.html"><a href="jump.html#elements-tab"><i class="fa fa-check"></i><b>1.2</b> Elements tab <i class="far fa-folder"></i></a></li>
<li class="chapter" data-level="1.3" data-path="jump.html"><a href="jump.html#console-tab"><i class="fa fa-check"></i><b>1.3</b> Console tab <i class="far fa-folder"></i></a></li>
<li class="chapter" data-level="1.4" data-path="jump.html"><a href="jump.html#modify-elements"><i class="fa fa-check"></i><b>1.4</b> Modify elements <i class="fas fa-exchange-alt"></i></a></li>
<li class="chapter" data-level="1.5" data-path="jump.html"><a href="jump.html#add-transitions"><i class="fa fa-check"></i><b>1.5</b> Add transitions <i class="far fa-paper-plane"></i></a></li>
<li class="chapter" data-level="1.6" data-path="jump.html"><a href="jump.html#add-interactivity"><i class="fa fa-check"></i><b>1.6</b> Add interactivity <i class="fas fa-mouse-pointer"></i></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>2</b> Web tech <i class="fas fa-server"></i></a>
<ul>
<li class="chapter" data-level="2.1" data-path="web.html"><a href="web.html#html"><i class="fa fa-check"></i><b>2.1</b> HTML <i class="fab fa-html5"></i></a></li>
<li class="chapter" data-level="2.2" data-path="web.html"><a href="web.html#css"><i class="fa fa-check"></i><b>2.2</b> CSS <i class="fab fa-css3"></i></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="web.html"><a href="web.html#internal-style-sheet"><i class="fa fa-check"></i><b>2.2.1</b> Internal style sheet</a></li>
<li class="chapter" data-level="2.2.2" data-path="web.html"><a href="web.html#external-style-sheets"><i class="fa fa-check"></i><b>2.2.2</b> External style sheets</a></li>
<li class="chapter" data-level="2.2.3" data-path="web.html"><a href="web.html#inline-styling"><i class="fa fa-check"></i><b>2.2.3</b> Inline styling</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="web.html"><a href="web.html#svg"><i class="fa fa-check"></i><b>2.3</b> SVG <i class="far fa-image"></i></a></li>
<li class="chapter" data-level="2.4" data-path="web.html"><a href="web.html#javascript"><i class="fa fa-check"></i><b>2.4</b> JavaScript <i class="fab fa-js-square"></i></a></li>
<li class="chapter" data-level="2.5" data-path="web.html"><a href="web.html#d3"><i class="fa fa-check"></i><b>2.5</b> D3 <i class="far fa-chart-bar"></i></a></li>
<li class="chapter" data-level="2.6" data-path="web.html"><a href="web.html#html-tree"><i class="fa fa-check"></i><b>2.6</b> HTML tree <i class="fas fa-tree"></i></a></li>
<li class="chapter" data-level="2.7" data-path="web.html"><a href="web.html#exercise-shapes"><i class="fa fa-check"></i><b>2.7</b> Exercise <i class="fas fa-dumbbell"></i>: shapes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="d3console.html"><a href="d3console.html"><i class="fa fa-check"></i><b>3</b> D3 in the Console <i class="far fa-folder"></i></a>
<ul>
<li class="chapter" data-level="3.1" data-path="d3console.html"><a href="d3console.html#selections"><i class="fa fa-check"></i><b>3.1</b> Selections <i class="fas fa-clipboard-list"></i></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="d3console.html"><a href="d3console.html#select-by-tag"><i class="fa fa-check"></i><b>3.1.1</b> Select by tag</a></li>
<li class="chapter" data-level="3.1.2" data-path="d3console.html"><a href="d3console.html#select-by-class"><i class="fa fa-check"></i><b>3.1.2</b> Select by class</a></li>
<li class="chapter" data-level="3.1.3" data-path="d3console.html"><a href="d3console.html#select-by-id"><i class="fa fa-check"></i><b>3.1.3</b> Select by ID</a></li>
<li class="chapter" data-level="3.1.4" data-path="d3console.html"><a href="d3console.html#store-selections"><i class="fa fa-check"></i><b>3.1.4</b> Store selections</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="d3console.html"><a href="d3console.html#modify-existing-elements"><i class="fa fa-check"></i><b>3.2</b> Modify existing elements <i class="fas fa-exchange-alt"></i></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="d3console.html"><a href="d3console.html#modify-attributes"><i class="fa fa-check"></i><b>3.2.1</b> Modify attributes</a></li>
<li class="chapter" data-level="3.2.2" data-path="d3console.html"><a href="d3console.html#modify-styles"><i class="fa fa-check"></i><b>3.2.2</b> Modify styles</a></li>
<li class="chapter" data-level="3.2.3" data-path="d3console.html"><a href="d3console.html#modify-text"><i class="fa fa-check"></i><b>3.2.3</b> Modify text</a></li>
<li class="chapter" data-level="3.2.4" data-path="d3console.html"><a href="d3console.html#move-svg-text"><i class="fa fa-check"></i><b>3.2.4</b> Move SVG text</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="d3console.html"><a href="d3console.html#add-elements"><i class="fa fa-check"></i><b>3.3</b> Add elements <i class="far fa-plus-square"></i></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="d3console.html"><a href="d3console.html#html-1"><i class="fa fa-check"></i><b>3.3.1</b> HTML</a></li>
<li class="chapter" data-level="3.3.2" data-path="d3console.html"><a href="d3console.html#svg-1"><i class="fa fa-check"></i><b>3.3.2</b> SVG</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="d3console.html"><a href="d3console.html#remove-elements"><i class="fa fa-check"></i><b>3.4</b> Remove elements <i class="far fa-minus-square"></i></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="d3console.html"><a href="d3console.html#html-2"><i class="fa fa-check"></i><b>3.4.1</b> HTML</a></li>
<li class="chapter" data-level="3.4.2" data-path="d3console.html"><a href="d3console.html#svg-2"><i class="fa fa-check"></i><b>3.4.2</b> SVG</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="d3console.html"><a href="d3console.html#exercise-green-circles"><i class="fa fa-check"></i><b>3.5</b> Exercise <i class="fas fa-dumbbell"></i>: green circles</a></li>
<li class="chapter" data-level="3.6" data-path="d3console.html"><a href="d3console.html#exercise-blue-circles"><i class="fa fa-check"></i><b>3.6</b> Exercise <i class="fas fa-dumbbell"></i> <i class="fas fa-dumbbell"></i>: blue circles</a></li>
<li class="chapter" data-level="3.7" data-path="d3console.html"><a href="d3console.html#bind-data-finally"><i class="fa fa-check"></i><b>3.7</b> Bind data… <em>finally!</em> <i class="fas fa-table"></i></a></li>
<li class="chapter" data-level="3.8" data-path="d3console.html"><a href="d3console.html#exercise-data-bind"><i class="fa fa-check"></i><b>3.8</b> Exercise <i class="fas fa-dumbbell"></i>: data bind</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html"><i class="fa fa-check"></i><b>4</b> Update, Enter, and Exit <i class="fa fa-refresh"></i></a>
<ul>
<li class="chapter" data-level="4.1" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#lecture-slides"><i class="fa fa-check"></i><b>4.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="4.2" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#use-exit-selection-to-remove-elements"><i class="fa fa-check"></i><b>4.2</b> Use exit selection to remove elements <i class="far fa-minus-square"></i></a></li>
<li class="chapter" data-level="4.3" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#use-enter-selection-to-add-elements"><i class="fa fa-check"></i><b>4.3</b> Use enter selection to add elements<i class="far fa-plus-square"></i></a></li>
<li class="chapter" data-level="4.4" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#data-enter-append-sequence"><i class="fa fa-check"></i><b>4.4</b> Data / enter / append sequence<i class="fa fa-table"></i></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#labels"><i class="fa fa-check"></i><b>4.4.1</b> Labels</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#exercise-horizontal-bar-chart"><i class="fa fa-check"></i><b>4.5</b> Exercise <i class="fas fa-dumbbell"></i>: horizontal bar chart</a></li>
<li class="chapter" data-level="4.6" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#merge-selections"><i class="fa fa-check"></i><b>4.6</b> Merge selections <i class="fa fa-code-fork"></i></a></li>
<li class="chapter" data-level="4.7" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#exercise-merge"><i class="fa fa-check"></i><b>4.7</b> Exercise <i class="fas fa-dumbbell"></i>: merge</a></li>
<li class="chapter" data-level="4.8" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#groups"><i class="fa fa-check"></i><b>4.8</b> Groups <i class="fa fa-object-group"></i></a></li>
<li class="chapter" data-level="4.9" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#general-update-pattern-with-merge"><i class="fa fa-check"></i><b>4.9</b> General Update Pattern (with merge)</a></li>
<li class="chapter" data-level="4.10" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#general-update-pattern-with-join"><i class="fa fa-check"></i><b>4.10</b> General Update Pattern (with join)</a></li>
<li class="chapter" data-level="4.11" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#exercise-functions"><i class="fa fa-check"></i><b>4.11</b> Exercise: <i class="fas fa-dumbbell"></i>: functions</a></li>
<li class="chapter" data-level="4.12" data-path="update-enter-and-exit.html"><a href="update-enter-and-exit.html#exercise-vertical-bar-chart"><i class="fa fa-check"></i><b>4.12</b> Exercise <i class="fas fa-dumbbell"></i>: vertical bar chart</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="just-enough-js.html"><a href="just-enough-js.html"><i class="fa fa-check"></i><b>5</b> Just Enough JS <i class="fab fa-js-square"></i></a>
<ul>
<li class="chapter" data-level="5.1" data-path="just-enough-js.html"><a href="just-enough-js.html#arrays-of-arrays"><i class="fa fa-check"></i><b>5.1</b> Arrays of arrays</a></li>
<li class="chapter" data-level="5.2" data-path="just-enough-js.html"><a href="just-enough-js.html#arrays-of-objects"><i class="fa fa-check"></i><b>5.2</b> Arrays of objects</a></li>
<li class="chapter" data-level="5.3" data-path="just-enough-js.html"><a href="just-enough-js.html#map"><i class="fa fa-check"></i><b>5.3</b> <code>.map()</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="just-enough-js.html"><a href="just-enough-js.html#simple-arrays"><i class="fa fa-check"></i><b>5.3.1</b> Simple arrays</a></li>
<li class="chapter" data-level="5.3.2" data-path="just-enough-js.html"><a href="just-enough-js.html#arrays-of-arrays-1"><i class="fa fa-check"></i><b>5.3.2</b> Arrays of arrays</a></li>
<li class="chapter" data-level="5.3.3" data-path="just-enough-js.html"><a href="just-enough-js.html#create-arrays-of-objects"><i class="fa fa-check"></i><b>5.3.3</b> Create arrays of objects</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="just-enough-js.html"><a href="just-enough-js.html#d3-sorting"><i class="fa fa-check"></i><b>5.4</b> D3 sorting</a></li>
<li class="chapter" data-level="5.5" data-path="just-enough-js.html"><a href="just-enough-js.html#d3-statistics"><i class="fa fa-check"></i><b>5.5</b> D3 statistics</a></li>
<li class="chapter" data-level="5.6" data-path="just-enough-js.html"><a href="just-enough-js.html#d3-.map"><i class="fa fa-check"></i><b>5.6</b> D3 + <code>.map()</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="scales-and-axes.html"><a href="scales-and-axes.html"><i class="fa fa-check"></i><b>6</b> Scales and Axes <i class="fa fa-arrows"></i></a>
<ul>
<li class="chapter" data-level="6.1" data-path="scales-and-axes.html"><a href="scales-and-axes.html#scales"><i class="fa fa-check"></i><b>6.1</b> Scales</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="scales-and-axes.html"><a href="scales-and-axes.html#lecture-slides-1"><i class="fa fa-check"></i><b>6.1.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="6.1.2" data-path="scales-and-axes.html"><a href="scales-and-axes.html#practice"><i class="fa fa-check"></i><b>6.1.2</b> Practice</a></li>
<li class="chapter" data-level="6.1.3" data-path="scales-and-axes.html"><a href="scales-and-axes.html#bar-chart"><i class="fa fa-check"></i><b>6.1.3</b> Bar chart</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="scales-and-axes.html"><a href="scales-and-axes.html#margins"><i class="fa fa-check"></i><b>6.2</b> Margins</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="scales-and-axes.html"><a href="scales-and-axes.html#lecture-slides-2"><i class="fa fa-check"></i><b>6.2.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="6.2.2" data-path="scales-and-axes.html"><a href="scales-and-axes.html#bar-chart-with-margins"><i class="fa fa-check"></i><b>6.2.2</b> Bar chart with margins</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="scales-and-axes.html"><a href="scales-and-axes.html#axes"><i class="fa fa-check"></i><b>6.3</b> Axes</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="scales-and-axes.html"><a href="scales-and-axes.html#lecture-slides-3"><i class="fa fa-check"></i><b>6.3.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="6.3.2" data-path="scales-and-axes.html"><a href="scales-and-axes.html#bar-chart-with-axes"><i class="fa fa-check"></i><b>6.3.2</b> Bar chart with axes</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="scales-and-axes.html"><a href="scales-and-axes.html#bar-chart-with-categorical-labels"><i class="fa fa-check"></i><b>6.4</b> Bar chart with categorical labels</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="interactivity.html"><a href="interactivity.html"><i class="fa fa-check"></i><b>7</b> Interactivity <i class="fas fa-mouse-pointer"></i></a>
<ul>
<li class="chapter" data-level="7.1" data-path="interactivity.html"><a href="interactivity.html#binding-event-listeners"><i class="fa fa-check"></i><b>7.1</b> Binding event listeners</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="interactivity.html"><a href="interactivity.html#do-something-unrelated-to-the-element-that-received-the-event"><i class="fa fa-check"></i><b>7.1.1</b> Do something unrelated to the element that received the event</a></li>
<li class="chapter" data-level="7.1.2" data-path="interactivity.html"><a href="interactivity.html#change-an-attribute-of-the-element-that-received-the-event"><i class="fa fa-check"></i><b>7.1.2</b> Change an attribute of the element that received the event</a></li>
<li class="chapter" data-level="7.1.3" data-path="interactivity.html"><a href="interactivity.html#get-the-value-of-an-attribute-of-the-element-that-received-the-event"><i class="fa fa-check"></i><b>7.1.3</b> Get the value of an attribute of the element that received the event</a></li>
<li class="chapter" data-level="7.1.4" data-path="interactivity.html"><a href="interactivity.html#do-something-with-the-data-bound-to-the-element-that-received-the-event"><i class="fa fa-check"></i><b>7.1.4</b> Do something with the data bound to the element that received the event</a></li>
<li class="chapter" data-level="7.1.5" data-path="interactivity.html"><a href="interactivity.html#get-the-svg-location-of-the-event"><i class="fa fa-check"></i><b>7.1.5</b> Get the svg location of the event</a></li>
<li class="chapter" data-level="7.1.6" data-path="interactivity.html"><a href="interactivity.html#do-something-with-the-value-of-a-radio-button"><i class="fa fa-check"></i><b>7.1.6</b> Do something with the value of a radio button</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="interactivity.html"><a href="interactivity.html#separating-the-function-and-event-listener"><i class="fa fa-check"></i><b>7.2</b> Separating the function and event listener</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="interactivity.html"><a href="interactivity.html#attribute-of-an-element"><i class="fa fa-check"></i><b>7.2.1</b> Attribute of an element</a></li>
<li class="chapter" data-level="7.2.2" data-path="interactivity.html"><a href="interactivity.html#value-of-radio-button"><i class="fa fa-check"></i><b>7.2.2</b> Value of radio button</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="interactivity.html"><a href="interactivity.html#add-remove-buttons"><i class="fa fa-check"></i><b>7.3</b> Add / remove “buttons”</a></li>
<li class="chapter" data-level="7.4" data-path="interactivity.html"><a href="interactivity.html#putting-it-all-together"><i class="fa fa-check"></i><b>7.4</b> Putting it all together</a></li>
<li class="chapter" data-level="7.5" data-path="interactivity.html"><a href="interactivity.html#dependent-event-listeners"><i class="fa fa-check"></i><b>7.5</b> Dependent event listeners</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="interactivity.html"><a href="interactivity.html#global-variable-example"><i class="fa fa-check"></i><b>7.5.1</b> Global variable example</a></li>
<li class="chapter" data-level="7.5.2" data-path="interactivity.html"><a href="interactivity.html#turn-off-event-listener"><i class="fa fa-check"></i><b>7.5.2</b> Turn off event listener</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="transitions.html"><a href="transitions.html"><i class="fa fa-check"></i><b>8</b> Transitions <i class="far fa-paper-plane"></i></a>
<ul>
<li class="chapter" data-level="8.1" data-path="transitions.html"><a href="transitions.html#examples"><i class="fa fa-check"></i><b>8.1</b> Examples</a></li>
<li class="chapter" data-level="8.2" data-path="transitions.html"><a href="transitions.html#do-this"><i class="fa fa-check"></i><b>8.2</b> Do this</a></li>
<li class="chapter" data-level="8.3" data-path="transitions.html"><a href="transitions.html#not-this"><i class="fa fa-check"></i><b>8.3</b> Not this</a></li>
<li class="chapter" data-level="8.4" data-path="transitions.html"><a href="transitions.html#strategy"><i class="fa fa-check"></i><b>8.4</b> Strategy</a></li>
<li class="chapter" data-level="8.5" data-path="transitions.html"><a href="transitions.html#exercise-bar-chart-with-transitions"><i class="fa fa-check"></i><b>8.5</b> Exercise <i class="fas fa-dumbbell"></i>: Bar chart with transitions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="object.html"><a href="object.html"><i class="fa fa-check"></i><b>9</b> Object Constancy <i class="fa fa-object-ungroup"></i></a>
<ul>
<li class="chapter" data-level="9.1" data-path="object.html"><a href="object.html#lecture-slides-4"><i class="fa fa-check"></i><b>9.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="9.2" data-path="object.html"><a href="object.html#no-object-constancy"><i class="fa fa-check"></i><b>9.2</b> No object constancy</a></li>
<li class="chapter" data-level="9.3" data-path="object.html"><a href="object.html#object-constancy"><i class="fa fa-check"></i><b>9.3</b> Object constancy</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="object.html"><a href="object.html#practice-joining-data-by-key"><i class="fa fa-check"></i><b>9.3.1</b> Practice joining data by key</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reading-files.html"><a href="reading-files.html"><i class="fa fa-check"></i><b>10</b> Reading files <i class="fa fa-file-text-o"></i></a>
<ul>
<li class="chapter" data-level="10.1" data-path="reading-files.html"><a href="reading-files.html#promises"><i class="fa fa-check"></i><b>10.1</b> Promises</a></li>
<li class="chapter" data-level="10.2" data-path="reading-files.html"><a href="reading-files.html#local-server"><i class="fa fa-check"></i><b>10.2</b> Local server</a></li>
<li class="chapter" data-level="10.3" data-path="reading-files.html"><a href="reading-files.html#other-local-options"><i class="fa fa-check"></i><b>10.3</b> Other local options</a></li>
<li class="chapter" data-level="10.4" data-path="reading-files.html"><a href="reading-files.html#hosting-online"><i class="fa fa-check"></i><b>10.4</b> Hosting online</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="share-d3-online.html"><a href="share-d3-online.html"><i class="fa fa-check"></i><b>11</b> Share D3 online <i class="fa share-square"></i></a>
<ul>
<li class="chapter" data-level="11.1" data-path="share-d3-online.html"><a href="share-d3-online.html#vizhub"><i class="fa fa-check"></i><b>11.1</b> VizHub</a></li>
<li class="chapter" data-level="11.2" data-path="share-d3-online.html"><a href="share-d3-online.html#bookdown"><i class="fa fa-check"></i><b>11.2</b> bookdown</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="share-d3-online.html"><a href="share-d3-online.html#everything-in-the-.rmd"><i class="fa fa-check"></i><b>11.2.1</b> Everything in the .Rmd</a></li>
<li class="chapter" data-level="11.2.2" data-path="share-d3-online.html"><a href="share-d3-online.html#put-d3-in-a-separate-.js-file"><i class="fa fa-check"></i><b>11.2.2</b> Put D3 in a separate .js file</a></li>
<li class="chapter" data-level="11.2.3" data-path="share-d3-online.html"><a href="share-d3-online.html#iframe"><i class="fa fa-check"></i><b>11.2.3</b> iframe</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="share-d3-online.html"><a href="share-d3-online.html#observable"><i class="fa fa-check"></i><b>11.3</b> Observable</a></li>
<li class="chapter" data-level="11.4" data-path="share-d3-online.html"><a href="share-d3-online.html#blockbuilder-2015-2020"><i class="fa fa-check"></i><b>11.4</b> Blockbuilder 2015-2020</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="line-charts.html"><a href="line-charts.html"><i class="fa fa-check"></i><b>12</b> Line charts <i class="fa fa-line-chart"></i></a>
<ul>
<li class="chapter" data-level="12.1" data-path="line-charts.html"><a href="line-charts.html#lecture-slides-5"><i class="fa fa-check"></i><b>12.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="12.2" data-path="line-charts.html"><a href="line-charts.html#svg-line-element"><i class="fa fa-check"></i><b>12.2</b> SVG <code>&lt;line&gt;</code> element</a></li>
<li class="chapter" data-level="12.3" data-path="line-charts.html"><a href="line-charts.html#svg-path-element"><i class="fa fa-check"></i><b>12.3</b> SVG <code>&lt;path&gt;</code> element</a></li>
<li class="chapter" data-level="12.4" data-path="line-charts.html"><a href="line-charts.html#data-for-line-chart"><i class="fa fa-check"></i><b>12.4</b> Data for line chart</a></li>
<li class="chapter" data-level="12.5" data-path="line-charts.html"><a href="line-charts.html#create-a-line-generator"><i class="fa fa-check"></i><b>12.5</b> Create a line generator</a></li>
<li class="chapter" data-level="12.6" data-path="line-charts.html"><a href="line-charts.html#put-the-line-generator-to-work"><i class="fa fa-check"></i><b>12.6</b> Put the line generator to work</a></li>
<li class="chapter" data-level="12.7" data-path="line-charts.html"><a href="line-charts.html#additional-resources"><i class="fa fa-check"></i><b>12.7</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="layouts.html"><a href="layouts.html"><i class="fa fa-check"></i><b>13</b> Layouts <i class="fa fa-bar-chart"></i></a>
<ul>
<li class="chapter" data-level="13.1" data-path="layouts.html"><a href="layouts.html#lecture-slides-6"><i class="fa fa-check"></i><b>13.1</b> Lecture slides <i class="fa fa-television"></i></a></li>
<li class="chapter" data-level="13.2" data-path="layouts.html"><a href="layouts.html#set-up-data-and-stack-method"><i class="fa fa-check"></i><b>13.2</b> Set up data and stack method</a></li>
<li class="chapter" data-level="13.3" data-path="layouts.html"><a href="layouts.html#set-up-scales"><i class="fa fa-check"></i><b>13.3</b> Set up scales</a></li>
<li class="chapter" data-level="13.4" data-path="layouts.html"><a href="layouts.html#add-groups"><i class="fa fa-check"></i><b>13.4</b> Add groups</a></li>
<li class="chapter" data-level="13.5" data-path="layouts.html"><a href="layouts.html#add-rectangles"><i class="fa fa-check"></i><b>13.5</b> Add rectangles</a></li>
<li class="chapter" data-level="13.6" data-path="layouts.html"><a href="layouts.html#get-the-code"><i class="fa fa-check"></i><b>13.6</b> Get the code</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="general-advice.html"><a href="general-advice.html"><i class="fa fa-check"></i><b>14</b> General Advice <i class="fa fa-bug"></i></a>
<ul>
<li class="chapter" data-level="14.1" data-path="general-advice.html"><a href="general-advice.html#debugging-tips"><i class="fa fa-check"></i><b>14.1</b> Debugging Tips</a></li>
<li class="chapter" data-level="14.2" data-path="general-advice.html"><a href="general-advice.html#other"><i class="fa fa-check"></i><b>14.2</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i><b>15</b> Solutions <i class="fa fa-check-square-o"></i></a>
<ul>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#web-tech-shapes"><i class="fa fa-check"></i>Web tech: shapes</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#d3-in-the-console-green-circles"><i class="fa fa-check"></i>D3 in the Console: green circles</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#d3-in-the-console-blue-circles"><i class="fa fa-check"></i>D3 in the Console: blue circles</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#d3-in-the-console-data-bind"><i class="fa fa-check"></i>D3 in the Console: data bind</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#update-enter-and-exit-horizontal-bar-chart"><i class="fa fa-check"></i>Update, Enter, and Exit: horizontal bar chart</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#update-enter-and-exit-merge"><i class="fa fa-check"></i>Update, Enter, and Exit: merge</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#update-enter-and-exit-functions"><i class="fa fa-check"></i>Update, Enter, and Exit: functions</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#update-enter-and-exit-vertical-bar-chart"><i class="fa fa-check"></i>Update, Enter, and Exit: vertical bar chart</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html#transitions-bar-chart-with-transitions"><i class="fa fa-check"></i>Transitions: bar chart with transitions</a></li>
</ul></li>
<li class="part"><span><b>I Examples</b></span></li>
<li class="chapter" data-level="16" data-path="correlation-coefficient.html"><a href="correlation-coefficient.html"><i class="fa fa-check"></i><b>16</b> Correlation Coefficient</a></li>
<li class="chapter" data-level="17" data-path="spearman-rank-correlation-coefficient.html"><a href="spearman-rank-correlation-coefficient.html"><i class="fa fa-check"></i><b>17</b> Spearman Rank Correlation Coefficient</a></li>
<li class="chapter" data-level="18" data-path="population-density.html"><a href="population-density.html"><i class="fa fa-check"></i><b>18</b> Population Density</a></li>
<li class="chapter" data-level="19" data-path="weather-forecast.html"><a href="weather-forecast.html"><i class="fa fa-check"></i><b>19</b> Weather forecast</a></li>
<li class="part"><span><b>II Appendices</b></span></li>
<li class="chapter" data-level="20" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html"><i class="fa fa-check"></i><b>20</b> Appendix: advanced CSS</a>
<ul>
<li class="chapter" data-level="20.1" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#buttons"><i class="fa fa-check"></i><b>20.1</b> Buttons</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#active"><i class="fa fa-check"></i><b>20.1.1</b> <code>.active</code></a></li>
<li class="chapter" data-level="20.1.2" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#active-1"><i class="fa fa-check"></i><b>20.1.2</b> <code>:active</code></a></li>
<li class="chapter" data-level="20.1.3" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#focus"><i class="fa fa-check"></i><b>20.1.3</b> <code>:focus</code></a></li>
<li class="chapter" data-level="20.1.4" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#hover"><i class="fa fa-check"></i><b>20.1.4</b> <code>:hover</code></a></li>
<li class="chapter" data-level="20.1.5" data-path="appendix-advanced-css.html"><a href="appendix-advanced-css.html#example"><i class="fa fa-check"></i><b>20.1.5</b> Example</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">D3 for R Users</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactivity" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Interactivity <i class="fas fa-mouse-pointer"></i><a href="interactivity.html#interactivity" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Read: <em>IDVW2</em>, Chapter 10 Interactivity</p>
<script src="https://d3js.org/d3.v7.js"></script>
<div id="binding-event-listeners" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Binding event listeners<a href="interactivity.html#binding-event-listeners" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<svg width="300" height="200">
<rect width="300" height="200" fill="lightblue"></rect>
<circle cx="50" cy="75" r="20" fill="blue"></circle>
<ellipse cx="175" cy="100" rx="45" ry="30" fill="green"></ellipse>
<text x="100" y="150">(100, 150)</text>
<line x1="250" y1="150" x2="275" y2="175" stroke="red" stroke-width="5"></line>
</svg>
<p>It’s helpful to think carefully about what you want to happen when an event listener is triggered and what information you need. Open Developer Tools and try these in the Console. Note that event management <a href="https://observablehq.com/@d3/d3v6-migration-guide#events" target="_blank">changed in v6</a> so code written for earlier versions of D3 will not work.</p>
<div id="do-something-unrelated-to-the-element-that-received-the-event" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Do something unrelated to the element that received the event<a href="interactivity.html#do-something-unrelated-to-the-element-that-received-the-event" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb126-1"><a href="interactivity.html#cb126-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg&quot;</span>)</span>
<span id="cb126-2"><a href="interactivity.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb126-3"><a href="interactivity.html#cb126-3" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg&quot;</span>)</span>
<span id="cb126-4"><a href="interactivity.html#cb126-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">append</span>(<span class="st">&quot;text&quot;</span>)</span>
<span id="cb126-5"><a href="interactivity.html#cb126-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;100&quot;</span>)</span>
<span id="cb126-6"><a href="interactivity.html#cb126-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;40&quot;</span>)</span>
<span id="cb126-7"><a href="interactivity.html#cb126-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">text</span>(<span class="st">&quot;Hello World&quot;</span>)<span class="op">;</span></span>
<span id="cb126-8"><a href="interactivity.html#cb126-8" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span></code></pre></div>
</div>
<div id="change-an-attribute-of-the-element-that-received-the-event" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Change an attribute of the element that received the event<a href="interactivity.html#change-an-attribute-of-the-element-that-received-the-event" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb127-1"><a href="interactivity.html#cb127-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;line&quot;</span>)</span>
<span id="cb127-2"><a href="interactivity.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb127-3"><a href="interactivity.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb127-4"><a href="interactivity.html#cb127-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;stroke-width&quot;</span><span class="op">,</span> <span class="st">&quot;10&quot;</span>)<span class="op">;</span></span>
<span id="cb127-5"><a href="interactivity.html#cb127-5" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
<p>In the context of event handlers, “this” is the element that received the event, a.k.a. what you clicked on if it’s a click event. An alternative (<span class="math inline">\(\geq\)</span> v6, see link above) is to pass the event and access the element with <code>event.currentTarget</code>:</p>
<p>or</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb128-1"><a href="interactivity.html#cb128-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;line&quot;</span>)</span>
<span id="cb128-2"><a href="interactivity.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb128-3"><a href="interactivity.html#cb128-3" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="bu">event</span><span class="op">.</span><span class="at">currentTarget</span>)</span>
<span id="cb128-4"><a href="interactivity.html#cb128-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;stroke&quot;</span><span class="op">,</span> <span class="st">&quot;yellow&quot;</span>)<span class="op">;</span></span>
<span id="cb128-5"><a href="interactivity.html#cb128-5" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
</div>
<div id="get-the-value-of-an-attribute-of-the-element-that-received-the-event" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Get the value of an attribute of the element that received the event<a href="interactivity.html#get-the-value-of-an-attribute-of-the-element-that-received-the-event" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb129-1"><a href="interactivity.html#cb129-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;circle&quot;</span>)</span>
<span id="cb129-2"><a href="interactivity.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb129-3"><a href="interactivity.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> rad <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="bu">event</span><span class="op">.</span><span class="at">currentTarget</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;r&quot;</span>)<span class="op">;</span></span>
<span id="cb129-4"><a href="interactivity.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;text&quot;</span>)</span>
<span id="cb129-5"><a href="interactivity.html#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(<span class="vs">`The radius is </span><span class="sc">${</span>rad<span class="sc">}</span><span class="vs"> pixels.`</span>)<span class="op">;</span></span>
<span id="cb129-6"><a href="interactivity.html#cb129-6" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
</div>
<div id="do-something-with-the-data-bound-to-the-element-that-received-the-event" class="section level3 hasAnchor" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> Do something with the data bound to the element that received the event<a href="interactivity.html#do-something-with-the-data-bound-to-the-element-that-received-the-event" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb130-1"><a href="interactivity.html#cb130-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;circle&quot;</span>)</span>
<span id="cb130-2"><a href="interactivity.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">data</span>([{<span class="dt">s</span><span class="op">:</span> <span class="st">&quot;red&quot;</span><span class="op">,</span> <span class="dt">sw</span><span class="op">:</span> <span class="st">&quot;15&quot;</span>}])</span>
<span id="cb130-3"><a href="interactivity.html#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb130-4"><a href="interactivity.html#cb130-4" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="bu">event</span><span class="op">.</span><span class="at">currentTarget</span>) </span>
<span id="cb130-5"><a href="interactivity.html#cb130-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;stroke&quot;</span><span class="op">,</span> d<span class="op">.</span><span class="at">s</span>)</span>
<span id="cb130-6"><a href="interactivity.html#cb130-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;stroke-width&quot;</span><span class="op">,</span> d<span class="op">.</span><span class="at">sw</span>)<span class="op">;</span></span>
<span id="cb130-7"><a href="interactivity.html#cb130-7" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
<p><strong>Note that starting with v6, the data is the 2nd parameter to be passed: <code>function(event, d)</code>. In addition, note that you do not need to pass <code>d</code> again when accessing the data: for example we use <code>d.s</code> not <code>d =&gt; d.s</code></strong>.</p>
<p>As in the previous example, <code>d3.select(this)</code> can be used instead of <code>d3.select(event.currentTarget)</code>.</p>
<p>Try changing the data value bound to the circle with <code>d3.select("circle").datum("10")</code> and clicking again.</p>
</div>
<div id="get-the-svg-location-of-the-event" class="section level3 hasAnchor" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> Get the svg location of the event<a href="interactivity.html#get-the-svg-location-of-the-event" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb131-1"><a href="interactivity.html#cb131-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg&quot;</span>)</span>
<span id="cb131-2"><a href="interactivity.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb131-3"><a href="interactivity.html#cb131-3" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;text&quot;</span>)</span>
<span id="cb131-4"><a href="interactivity.html#cb131-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="vs">`(</span><span class="sc">${</span>d3<span class="op">.</span><span class="fu">pointer</span>(<span class="bu">event</span>)<span class="op">.</span><span class="fu">map</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>)<span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb131-5"><a href="interactivity.html#cb131-5" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
<p>(Up to v5, <code>d3.mouse(this)</code> was used instead of <code>d3.pointer(event)</code>.)</p>
</div>
<div id="do-something-with-the-value-of-a-radio-button" class="section level3 hasAnchor" number="7.1.6">
<h3><span class="header-section-number">7.1.6</span> Do something with the value of a radio button<a href="interactivity.html#do-something-with-the-value-of-a-radio-button" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p id="color" style="background-color: silver; color: white;">
Please select your favorite primary color:
</p>
<p><input type="radio" id="html" name="fav_color" value="red"> red
<input type="radio" id="css" name="fav_color" value="blue"> blue
<input type="radio" id="javascript" name="fav_color" value="yellow"> yellow</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb132-1"><a href="interactivity.html#cb132-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">&quot;input&quot;</span>)</span>
<span id="cb132-2"><a href="interactivity.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb132-3"><a href="interactivity.html#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> favcolor <span class="op">=</span> <span class="bu">event</span><span class="op">.</span><span class="at">currentTarget</span><span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb132-4"><a href="interactivity.html#cb132-4" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;p#color&quot;</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">&quot;color&quot;</span><span class="op">,</span> favcolor)<span class="op">;</span></span>
<span id="cb132-5"><a href="interactivity.html#cb132-5" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<script>
d3.selectAll("input")
  .on("click", function(event) {
    const favcolor = event.currentTarget.value;
    d3.select("p#color").style("color", favcolor);
    });
</script>
</div>
</div>
<div id="separating-the-function-and-event-listener" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Separating the function and event listener<a href="interactivity.html#separating-the-function-and-event-listener" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Examples</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb133-1"><a href="interactivity.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">goyellow</span>() {</span>
<span id="cb133-2"><a href="interactivity.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb133-3"><a href="interactivity.html#cb133-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;fill&quot;</span><span class="op">,</span> <span class="st">&quot;yellow&quot;</span>)</span>
<span id="cb133-4"><a href="interactivity.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb134-1"><a href="interactivity.html#cb134-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;circle&quot;</span>)</span>
<span id="cb134-2"><a href="interactivity.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;mouseover&quot;</span><span class="op">,</span> goyellow)<span class="op">;</span></span></code></pre></div>
<p>Try this in the Console:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb135-1"><a href="interactivity.html#cb135-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg&quot;</span>)</span>
<span id="cb135-2"><a href="interactivity.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span> (<span class="bu">event</span>) {</span>
<span id="cb135-3"><a href="interactivity.html#cb135-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(d3<span class="op">.</span><span class="fu">pointer</span>(<span class="bu">event</span>)<span class="op">.</span><span class="fu">map</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>))<span class="op">;</span></span>
<span id="cb135-4"><a href="interactivity.html#cb135-4" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<div id="attribute-of-an-element" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Attribute of an element<a href="interactivity.html#attribute-of-an-element" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>d3.select(this).attr("id");</code></p>
</div>
<div id="value-of-radio-button" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Value of radio button<a href="interactivity.html#value-of-radio-button" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>d3.select(this).node().value;</code> (string)</p>
<p><code>+d3.select(this).node().value;</code> (number)</p>
</div>
</div>
<div id="add-remove-buttons" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Add / remove “buttons”<a href="interactivity.html#add-remove-buttons" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(HTML paragraphs are used as buttons in this example.)</p>
<p>HTML:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb136-1"><a href="interactivity.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;add&quot;</span><span class="kw">&gt;</span>Add an element<span class="kw">&lt;/p&gt;</span></span>
<span id="cb136-2"><a href="interactivity.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;remove_left&quot;</span><span class="kw">&gt;</span>Remove bar (left)<span class="kw">&lt;/p&gt;</span></span>
<span id="cb136-3"><a href="interactivity.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;remove_right&quot;</span><span class="kw">&gt;</span>Remove bar (right)<span class="kw">&lt;/p&gt;</span></span></code></pre></div>
<p>JavaScript:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb137-1"><a href="interactivity.html#cb137-1" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">&quot;p&quot;</span>)</span>
<span id="cb137-2"><a href="interactivity.html#cb137-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb137-3"><a href="interactivity.html#cb137-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> paraID <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;id&quot;</span>)<span class="op">;</span></span>
<span id="cb137-4"><a href="interactivity.html#cb137-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (paraID <span class="op">==</span> <span class="st">&quot;add&quot;</span>) {</span>
<span id="cb137-5"><a href="interactivity.html#cb137-5" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> newvalue <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">*</span><span class="dv">400</span>)<span class="op">;</span></span>
<span id="cb137-6"><a href="interactivity.html#cb137-6" aria-hidden="true" tabindex="-1"></a>          bardata<span class="op">.</span><span class="fu">push</span>(newvalue)<span class="op">;</span></span>
<span id="cb137-7"><a href="interactivity.html#cb137-7" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> <span class="cf">if</span> (paraID <span class="op">==</span> <span class="st">&quot;remove_left&quot;</span>) {</span>
<span id="cb137-8"><a href="interactivity.html#cb137-8" aria-hidden="true" tabindex="-1"></a>          bardata<span class="op">.</span><span class="fu">shift</span>()<span class="op">;</span></span>
<span id="cb137-9"><a href="interactivity.html#cb137-9" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> {</span>
<span id="cb137-10"><a href="interactivity.html#cb137-10" aria-hidden="true" tabindex="-1"></a>          bardata<span class="op">.</span><span class="fu">pop</span>()<span class="op">;</span></span>
<span id="cb137-11"><a href="interactivity.html#cb137-11" aria-hidden="true" tabindex="-1"></a>          }<span class="op">;</span></span>
<span id="cb137-12"><a href="interactivity.html#cb137-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">update</span>(bardata)<span class="op">;</span></span>
<span id="cb137-13"><a href="interactivity.html#cb137-13" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
</div>
<div id="putting-it-all-together" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Putting it all together<a href="interactivity.html#putting-it-all-together" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vertical bar chart with add / remove buttons and general update pattern</p>
<p><a href="code/vertical_bar.html" target="_blank">vertical_bar.html</a></p>
</div>
<div id="dependent-event-listeners" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Dependent event listeners<a href="interactivity.html#dependent-event-listeners" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In these examples, the behavior or existence of one event listener depends on another.</p>
<div id="global-variable-example" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Global variable example<a href="interactivity.html#global-variable-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here the circle click behavior depends on the value of the radio button: if the “Move left” radio button is checked, the circle will move left <em>when clicked</em>. If the “Move right” radio button is checked, the circle will move right <em>when clicked</em>.</p>
<p>A global variable is used to keep track of the radio button value. The event listener on the circle conditions the behavior on the value of this global variable.</p>
<div id="rad" style="margin-left: 30px">
<h4>
Click the circle.
</h4>
<p><input type="radio" name="direction" value="left" checked="true"> Move left
<input type="radio" name="direction" value="right"> Move right<br>
<svg id='radio' width='300' height='200'>
<rect x='0' y='0' width='300' height ='200' fill = 'lightblue'></rect>
<circle cx='150' cy='100' r='20' fill='red'></circle>
<text x='10' y='190' style = 'font-size: 80%;'>svg#radio</text>
</svg></p>
</div>
<div style="margin-left: 30px">
<div class="sourceCode" id="cb138"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb138-1"><a href="interactivity.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co">// global variable keeps track of which radio button is clicked</span></span>
<span id="cb138-2"><a href="interactivity.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> action <span class="op">=</span> <span class="st">&quot;left&quot;</span><span class="op">;</span></span>
<span id="cb138-3"><a href="interactivity.html#cb138-3" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;div#rad&quot;</span>)</span>
<span id="cb138-4"><a href="interactivity.html#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">&quot;input&quot;</span>)</span>
<span id="cb138-5"><a href="interactivity.html#cb138-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>() { action <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="at">value</span><span class="op">;</span> })<span class="op">;</span></span>
<span id="cb138-6"><a href="interactivity.html#cb138-6" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb138-7"><a href="interactivity.html#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="co">// circle click behavior depends on value of &quot;action&quot;</span></span>
<span id="cb138-8"><a href="interactivity.html#cb138-8" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio&quot;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;circle&quot;</span>)</span>
<span id="cb138-9"><a href="interactivity.html#cb138-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb138-10"><a href="interactivity.html#cb138-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> cx_new<span class="op">;</span></span>
<span id="cb138-11"><a href="interactivity.html#cb138-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (action <span class="op">==</span> <span class="st">&quot;left&quot;</span>) {</span>
<span id="cb138-12"><a href="interactivity.html#cb138-12" aria-hidden="true" tabindex="-1"></a>      cx_new <span class="op">=</span> <span class="op">+</span>d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;cx&quot;</span>) <span class="op">-</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb138-13"><a href="interactivity.html#cb138-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (cx_new <span class="op">&lt;</span> <span class="dv">20</span>) cx_new <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb138-14"><a href="interactivity.html#cb138-14" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb138-15"><a href="interactivity.html#cb138-15" aria-hidden="true" tabindex="-1"></a>      cx_new <span class="op">=</span> <span class="op">+</span>d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;cx&quot;</span>) <span class="op">+</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb138-16"><a href="interactivity.html#cb138-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (cx_new <span class="op">&gt;</span> <span class="dv">280</span>) cx_new <span class="op">=</span> <span class="dv">280</span><span class="op">;</span></span>
<span id="cb138-17"><a href="interactivity.html#cb138-17" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb138-18"><a href="interactivity.html#cb138-18" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb138-19"><a href="interactivity.html#cb138-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb138-20"><a href="interactivity.html#cb138-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">duration</span>(<span class="dv">500</span>)</span>
<span id="cb138-21"><a href="interactivity.html#cb138-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&quot;cx&quot;</span><span class="op">,</span> cx_new)<span class="op">;</span></span>
<span id="cb138-22"><a href="interactivity.html#cb138-22" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// global variable keeps track of which radio button is clicked
let action = "left";
d3.select("div#rad")
  .selectAll("input")
  .on("click", function() { action = d3.select(this).node().value; });
      
// circle click behavior depends on value of "action"
d3.select("svg#radio").select("circle")
  .on("click", function () {
    let cx_new;
    if (action == "left") {
      cx_new = +d3.select(this).attr("cx") - 50;
      if (cx_new < 20) cx_new = 20;
      } else {
      cx_new = +d3.select(this).attr("cx") + 50;
      if (cx_new > 280) cx_new = 280;
      }
    d3.select(this)
      .transition()
      .duration(500)
      .attr("cx", cx_new);
      });

</script>
</div>
</div>
<div id="turn-off-event-listener" class="section level3 hasAnchor" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Turn off event listener<a href="interactivity.html#turn-off-event-listener" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, the event listeners on the squares are turned on or off depending on the value of the radio button. Event listeners can be removed by setting the behavior to <code>null</code>.</p>
<div id="rad2" style="margin-left: 30px">
<h4>
Click a square.
</h4>
<p><input type="radio" name="square" value="red" checked="true"> Red active
<input type="radio" name="square" value="blue"> Blue active<br></p>
<svg id="radio2" width="300" height="200">
<rect x='0' y='0' width='300' height ='200' fill = 'lightblue'></rect>
<rect id='red' x='75' y='75' width='50' height='50' fill='red'></rect>
<rect id='blue' x='175' y='75' width='50' height='50' fill='blue'></rect>
<text x='10' y='190' style = 'font-size: 80%;'>svg#radio2</text>
</svg>
</div>
<div style="margin-left: 30px">
<div class="sourceCode" id="cb139"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb139-1"><a href="interactivity.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">// movement function</span></span>
<span id="cb139-2"><a href="interactivity.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> jump <span class="op">=</span> <span class="kw">function</span> () {</span>
<span id="cb139-3"><a href="interactivity.html#cb139-3" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">500</span>)</span>
<span id="cb139-4"><a href="interactivity.html#cb139-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&#39;y&#39;</span><span class="op">,</span> <span class="st">&#39;0&#39;</span>)</span>
<span id="cb139-5"><a href="interactivity.html#cb139-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">duration</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">ease</span>(d3<span class="op">.</span><span class="at">easeBounce</span>)</span>
<span id="cb139-6"><a href="interactivity.html#cb139-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">&#39;y&#39;</span><span class="op">,</span> <span class="st">&#39;75&#39;</span>)<span class="op">;</span></span>
<span id="cb139-7"><a href="interactivity.html#cb139-7" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb139-8"><a href="interactivity.html#cb139-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-9"><a href="interactivity.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="co">// initial setup: add event listener to red square</span></span>
<span id="cb139-10"><a href="interactivity.html#cb139-10" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio2&quot;</span>)</span>
<span id="cb139-11"><a href="interactivity.html#cb139-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rect#red&quot;</span>)</span>
<span id="cb139-12"><a href="interactivity.html#cb139-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> jump)<span class="op">;</span></span>
<span id="cb139-13"><a href="interactivity.html#cb139-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb139-14"><a href="interactivity.html#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="co">// switch event listeners if radio button is clicked</span></span>
<span id="cb139-15"><a href="interactivity.html#cb139-15" aria-hidden="true" tabindex="-1"></a>d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;div#rad2&quot;</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">&quot;input&quot;</span>)</span>
<span id="cb139-16"><a href="interactivity.html#cb139-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb139-17"><a href="interactivity.html#cb139-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="at">value</span> <span class="op">==</span> <span class="st">&quot;blue&quot;</span>) {</span>
<span id="cb139-18"><a href="interactivity.html#cb139-18" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio2&quot;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rect#blue&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> jump)<span class="op">;</span></span>
<span id="cb139-19"><a href="interactivity.html#cb139-19" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio2&quot;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rect#red&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb139-20"><a href="interactivity.html#cb139-20" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb139-21"><a href="interactivity.html#cb139-21" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio2&quot;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rect#red&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> jump)<span class="op">;</span></span>
<span id="cb139-22"><a href="interactivity.html#cb139-22" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;svg#radio2&quot;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;rect#blue&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb139-23"><a href="interactivity.html#cb139-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb139-24"><a href="interactivity.html#cb139-24" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// movement function
const jump = function () {
      d3.select(this).transition().duration(500)
      .attr('y', '0')
      .transition().duration(500).ease(d3.easeBounce)
      .attr('y', '75');
};

// initial setup: add event listener to red square
d3.select("svg#radio2")
  .select("rect#red")
  .on("click", jump);
    
// switch event listeners if radio button is clicked
d3.select("div#rad2").selectAll("input")
  .on("click", function () {
  if (d3.select(this).node().value == "blue") {
    d3.select("svg#radio2").select("rect#blue").on("click", jump);
    d3.select("svg#radio2").select("rect#red").on("click", null);
    } else {
    d3.select("svg#radio2").select("rect#red").on("click", jump);
    d3.select("svg#radio2").select("rect#blue").on("click", null);
    }
});

</script>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scales-and-axes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transitions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jtr13/d3book/edit/main/interactivity.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jtr13/d3book/blob/main/interactivity.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
